混币交易

由于区块链的账本是公共开的，所以攻击者可以通过分析账本中资金的输入输出地址来找到输入输出地址之间的关联关系

而混币的作用则是将用户的资金来源进行混淆，使得攻击者不能够溯源到用户的资金来源链。

A通过交易收到了来自B的资金,而B的资金又是从C处转来的....这笔资金链都是共享在区块链账本中的，现在A需要向另一个输出地址转账，攻击者可以通过分析得到A的虚拟货币的交易链，从而获取A的个人信息等等

但是经过了混币交易之后

A的资金原本的输入地址是B的输出地址，输出地址假设是S，而混币的目的则是使得S的输入地址A混淆成其他来源的地址，这样攻击者就无法溯源资金链

基础简单的混币操作：A将货币输入到混币交易服务商中，混币交易商将其他来源的货币输出给A，这样A的货币来源就变成了其他来源，A与原本B的关联就消失了。


A的输出地址可以是A自己





中心化的混币交易

１　基础简单的混币操作：A将货币输入到混币交易服务商中，混币交易商将其他来源的货币输出给A提供的输出地址（可以是其他用户也可以是A自己），这样A提供的输出地址的货币来源就变成了其他来源而不是来自于A，A与这笔资金的关联就消失了。
２　存在的问题
中心化混币服务提供商固定的行为特征容易被攻击者分析，比如交易时间的规律性、固定的手续费、常用的地址池等
中心化混币服务提供商的行为没有监督，既无法保证资金能够返还给用户，也不能保证信息不被泄露。
３　解决的角度
随机化机制减少供应商存在的固定行为特征
电子签名保证用户资产的安全
盲签名保证用户信息的安全




去中心化的混币交易


conjoin协议
协商阶段：
参与混币的用户协商输入输出地址和统一输出金额等信息；
混淆阶段：
混币用户通过混币交易将金额转入统一的输出地址，然后混币交易把金额转入到各个用户指定的输出地址；
由于每个用户的输出金额是一样的，所以攻击者无法在多个一样的输出金额中找到对应的用户
确认阶段：
参与混币的用户确认混币交易中的输出地址和金额是否一致，然后对自己的输入进行签名，当所有的用户签名完成之后，将混币交易在区块链中广播。

存在的问题：
1 协商阶段的的相关信息对其他用户是可见的，容易被混入的攻击者分析得到输入输出的关联关系
2 确认阶段会出现一些节点拒绝签名或者将本该参与混币交易的资产花费，从而导致交易失败
总的来说就是无法保证内部隐私性


coinshuffle协议
协商阶段：
参与混币的金额都是一样的
用户A：（Aｄｃｂ）
用户B：（Ａｄｃ）（Ｂｄｃ）
用户C：（Ａｄ）（Ｂｄ）（Ｃｄ）（D）
用户D：（A）（B）（C）（D）

混淆阶段：
用户D加入自己的输出地址，然后对收到的输出地址进行混淆

确认阶段：
参与混币的用户检查交易内容并签名

问题：
1 拒绝服务攻击
2 最后一个用户可以控制混币的排列组合顺序



